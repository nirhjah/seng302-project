<!--
    This is used to render a page "swapper" to navigate through pages.
    Useful for navigating through table data.

    IMPORTANT NOTE:
    When using this fragment, the following variables MUST be defined:

    pageName : String,   The endpoint of the view page, e.g. "view-users"
    page : int,  The page number currently active
    currentSearch : String,  The current search string (i.e. when searching for a name)
    totalPages : int,  The total number of pages in the pagination object.
-->
<div th:fragment="pagination" class="pagination">
    <script>
        function gotoPage(pageNum) {
            const url = new URL(document.location.href);
            url.searchParams.set('page', pageNum);
            window.location.href = url.toString();
        }
    </script>
    <div class="paginationContainer">
        <div class="totalPages">
            Total Pages: [[${totalPages}]]
        </div>

        <div>
            <th:block th:unless="${page == 1}">
                <button class = "paginationButton" th:disabled="${page == 1}" th:onclick="|gotoPage(1)|">
                    <span>&leftarrow; First</span>
                </button>
            </th:block>
        </div>
        <div>
            <a th:unless="${page == 1}" th:href="@{'/' + ${pageName}(page=${page - 1}, currentSearch=${currentSearch})}">
                <button class = "paginationButton" th:disabled="${page == 1}" >
                    <span>&leftarrow; Prev</span>
                </button>
            </a>
        </div>

        <a th:unless="${(page - 1) <= 0}" th:href="@{'/' + ${pageName}(page=${page - 1}, currentSearch=${currentSearch})}">
            <button class="paginationActive" th:text="${page - 1}"></button>
        </a>
        <a th:unless="${totalPages == 0}" th:href="@{'/' + ${pageName}(page=${page}, currentSearch=${currentSearch})}">
            <button class="paginationActive" th:text="${page}"></button>
        </a>
        <a th:unless="${(page + 1) > totalPages}" th:href="@{'/' + ${pageName}(page=${page + 1}, currentSearch=${currentSearch})}">
            <button class="paginationActive" th:text="${page+1}"></button>
        </a>
            <!--
            "@{'/' + ${pageName}(page=${page - 1}, currentSearch=${currentSearch})}"
            -->
        <div>
            <a th:unless="${page == totalPages}" th:href="@{'/' + ${pageName}(page=${page + 1}, currentSearch=${currentSearch})}">
                <button class="paginationButton">
                    Next &rightarrow;
                </button>
            </a>
        </div>

        <div>
            <a th:unless="${page == totalPages}" th:href="@{'/' + ${pageName}(page=${totalPages}, currentSearch=${currentSearch})}">
                <button class="paginationButton" th:disabled="${page == totalPages}" >
                    Last &rightarrow;
                </button>
            </a>
        </div>
    </div>
</div>