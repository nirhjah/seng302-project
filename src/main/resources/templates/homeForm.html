<!--<!DOCTYPE html>-->
<!--<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml" lang="en">-->
<!--<head>-->
<!--    &lt;!&ndash;    <link rel="preload" as="image" th:href="@{../image/landscape.jpg}">&ndash;&gt;-->
<!--    <meta http-equiv="Content-Type" context="text/html; charset=UTF-8">-->
<!--    <link rel="preload" as="image" th:href="@{/image/landscape.jpeg}">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1">-->
<!--    <link th:href="@{/css/styles.css}" rel="stylesheet">-->
<!--    <title>Home</title>-->
<!--</head>-->
<!--<body class="home-background">-->
<!-- <div th:insert="~{fragments/navBar.html::navbar(displayTeams=${displayTeams})}"></div>-->
<!--    <div class="Welcome-header">-->
<!--        <h1>Welcome!</h1>-->
<!--    </div>-->
<!--    <footer>-->
<!--        <p>-->
<!--            Image by <a-->
<!--                href="https://www.freepik.com/free-vector/flat-happy-children-play-run-cycling-public-park_27059506.htm#query=nature%20sports%20illustration&position=0&from_view=search&track=ais">redgreystock</a>-->
<!--            on Freepik-->
<!--        </p>-->
<!--    </footer>-->
<!--</div>-->
<!--</body>-->
<!--<script>-->
<!--    // Working on the preloader fragment-->
<!--    // window.onload = function() {-->
<!--    //     var wrap = document.getElementById("wrap");-->
<!--    //     preloader.style.display = "none";-->
<!--    // }-->
<!--</script>-->
<!--</html>-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://thymeleaf.org">

<head>
    <link th:href="@{/css/styles.css}" rel="stylesheet"/>
    <meta http-equiv="Content-Type" context="text/html; charset=UTF-8">
    <link th:href="@{/css/formation.css}" rel="stylesheet" />

    <title>Formation</title>
</head>
<body>
<div th:insert="~{fragments/navBar.html::navbar(displayTeams=${displayTeams})}"></div>
    <div id="pitch">
        <div id="player1" class="player" draggable="true"></div>
        <div id="player2" class="player" draggable="true"></div>
        <div id="player3" class="player" draggable="true"></div>
        <div id="player4" class="player" draggable="true"></div>
        <div id="player5" class="player" draggable="true"></div>
        <div id="player6" class="player" draggable="true"></div>
        <div id="player7" class="player" draggable="true"></div>
        <div id="player8" class="player" draggable="true"></div>
        <div id="player9" class="player" draggable="true"></div>
        <div id="player10" class="player" draggable="true"></div>
        <div id="player11" class="player" draggable="true"></div>
    </div>
</body>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const players = document.querySelectorAll(".player");
        const pitch = document.getElementById("pitch");
        const pitchHeight = pitch.offsetHeight;

        players.forEach(player => {
            player.addEventListener("dragstart", dragStart);
            player.addEventListener("dragend", dragEnd);
        });

        function dragStart(e) {
            e.dataTransfer.setData("text/plain", e.target.id);
            this.style.opacity = "0.4";
        }

        function dragEnd(e) {
            this.style.opacity = "1";
        }

        pitch.addEventListener("dragover", dragOver);
        pitch.addEventListener("dragenter", dragEnter);
        pitch.addEventListener("dragleave", dragLeave);
        pitch.addEventListener("drop", dragDrop);

        function dragOver(e) {
            e.preventDefault();
        }

        function dragEnter(e) {
            e.preventDefault();
            this.classList.add("highlight");
        }

        function dragLeave() {
            this.classList.remove("highlight");
        }

        function dragDrop(e) {
            const playerId = e.dataTransfer.getData("text/plain");
            const player = document.getElementById(playerId);

            const offsetY = e.clientY - this.offsetTop;
            const snappedY = Math.round(offsetY / (pitchHeight / 5)) * (pitchHeight / 5);

            player.style.left = `${e.clientX - this.offsetLeft - player.offsetWidth / 2}px`;
            player.style.top = `${snappedY - player.offsetHeight / 2}px`;

            this.classList.remove("highlight");
        }
    });

</script>
</html>